{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.array.push.js\";\nexport class Loader {\n  constructor(apiKey = null, options = {}) {\n    this.apiKey = apiKey;\n    this.options = options;\n\n    if (typeof window === 'undefined') {\n      throw new Error('google-maps is supported only in browser environment');\n    }\n  }\n\n  load() {\n    if (typeof this.api !== 'undefined') {\n      return Promise.resolve(this.api);\n    }\n\n    if (typeof this.loader !== 'undefined') {\n      return this.loader;\n    }\n\n    window[Loader.CALLBACK_NAME] = () => {\n      this.api = window['google'];\n\n      if (typeof this.resolve === 'undefined') {\n        throw new Error('Should not happen');\n      }\n\n      this.resolve(this.api);\n    };\n\n    window['gm_authFailure'] = () => {\n      if (typeof this.reject === 'undefined') {\n        throw new Error('Should not happen');\n      }\n\n      this.reject(new Error('google-maps: authentication error'));\n    };\n\n    return this.loader = new Promise((resolve, reject) => {\n      this.resolve = resolve;\n      this.reject = reject;\n      const script = document.createElement('script');\n      script.src = this.createUrl();\n      script.async = true;\n\n      script.onerror = e => reject(e);\n\n      document.head.appendChild(script);\n    });\n  }\n\n  createUrl() {\n    const parameters = [`callback=${Loader.CALLBACK_NAME}`];\n\n    if (this.apiKey) {\n      parameters.push(`key=${this.apiKey}`);\n    }\n\n    for (let name in this.options) {\n      if (this.options.hasOwnProperty(name)) {\n        let value = this.options[name];\n\n        if (name === 'version') {\n          name = 'v';\n        }\n\n        if (name === 'libraries') {\n          value = value.join(',');\n        }\n\n        parameters.push(`${name}=${value}`);\n      }\n    }\n\n    return `https://maps.googleapis.com/maps/api/js?${parameters.join('&')}`;\n  }\n\n}\nLoader.CALLBACK_NAME = '_dk_google_maps_loader_cb';","map":{"version":3,"mappings":";;AAaA,OAAM,MAAOA,MAAP,CAAa;EAYlBC,YACSC,SAAiB,IAD1B,EAESC,UAAyB,EAFlC,EAEoC;IAD3B;IACA;;IAER,IAAI,OAAOC,MAAP,KAAkB,WAAtB,EAAmC;MAClC,MAAM,IAAIC,KAAJ,CAAU,sDAAV,CAAN;IACA;EACD;;EAEMC,IAAI;IAEV,IAAI,OAAO,KAAKC,GAAZ,KAAoB,WAAxB,EAAqC;MACpC,OAAOC,OAAO,CAACC,OAAR,CAAgB,KAAKF,GAArB,CAAP;IACA;;IAED,IAAI,OAAO,KAAKG,MAAZ,KAAuB,WAA3B,EAAwC;MACvC,OAAO,KAAKA,MAAZ;IACA;;IAEDN,MAAM,CAACJ,MAAM,CAACW,aAAR,CAAN,GAA+B,MAAK;MACnC,KAAKJ,GAAL,GAAWH,MAAM,CAAC,QAAD,CAAjB;;MAEA,IAAI,OAAO,KAAKK,OAAZ,KAAwB,WAA5B,EAAyC;QACxC,MAAM,IAAIJ,KAAJ,CAAU,mBAAV,CAAN;MACA;;MAED,KAAKI,OAAL,CAAa,KAAKF,GAAlB;IACA,CARD;;IAUAH,MAAM,CAAC,gBAAD,CAAN,GAA2B,MAAK;MAC/B,IAAI,OAAO,KAAKQ,MAAZ,KAAuB,WAA3B,EAAwC;QACvC,MAAM,IAAIP,KAAJ,CAAU,mBAAV,CAAN;MACA;;MAED,KAAKO,MAAL,CAAY,IAAIP,KAAJ,CAAU,mCAAV,CAAZ;IACA,CAND;;IAQA,OAAO,KAAKK,MAAL,GAAc,IAAIF,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAoB;MACpD,KAAKH,OAAL,GAAeA,OAAf;MACA,KAAKG,MAAL,GAAcA,MAAd;MAEA,MAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAf;MACAF,MAAM,CAACG,GAAP,GAAa,KAAKC,SAAL,EAAb;MACAJ,MAAM,CAACK,KAAP,GAAe,IAAf;;MACAL,MAAM,CAACM,OAAP,GAAkBC,CAAD,IAAOR,MAAM,CAACQ,CAAD,CAA9B;;MAEAN,QAAQ,CAACO,IAAT,CAAcC,WAAd,CAA0BT,MAA1B;IACA,CAVoB,CAArB;EAWA;;EAEOI,SAAS;IAEhB,MAAMM,UAAU,GAAkB,CACjC,YAAYvB,MAAM,CAACW,aAAa,EADC,CAAlC;;IAIA,IAAG,KAAKT,MAAR,EAAgB;MACfqB,UAAU,CAACC,IAAX,CAAgB,OAAO,KAAKtB,MAAM,EAAlC;IACA;;IAED,KAAK,IAAIuB,IAAT,IAAiB,KAAKtB,OAAtB,EAA+B;MAC9B,IAAI,KAAKA,OAAL,CAAauB,cAAb,CAA4BD,IAA5B,CAAJ,EAAuC;QACtC,IAAIE,KAAK,GAAG,KAAKxB,OAAL,CAAasB,IAAb,CAAZ;;QAEA,IAAIA,IAAI,KAAK,SAAb,EAAwB;UACvBA,IAAI,GAAG,GAAP;QACA;;QAED,IAAIA,IAAI,KAAK,WAAb,EAA0B;UACzBE,KAAK,GAAGA,KAAK,CAACC,IAAN,CAAW,GAAX,CAAR;QACA;;QAEDL,UAAU,CAACC,IAAX,CAAgB,GAAGC,IAAI,IAAIE,KAAK,EAAhC;MACA;IACD;;IAED,OAAO,2CAA2CJ,UAAU,CAACK,IAAX,CAAgB,GAAhB,CAAoB,EAAtE;EACA;;AAzFiB;AAEH5B,uBAAgB,2BAAhB","names":["Loader","constructor","apiKey","options","window","Error","load","api","Promise","resolve","loader","CALLBACK_NAME","reject","script","document","createElement","src","createUrl","async","onerror","e","head","appendChild","parameters","push","name","hasOwnProperty","value","join"],"sourceRoot":"","sources":["../../src/loader.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}